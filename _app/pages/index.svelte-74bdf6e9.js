import{U as Ae,V as _e,R as V,S as qe,i as Te,s as ze,e as v,t as y,k as z,c as D,a as b,g as A,n as I,d as _,b as g,W as pe,f as q,G as p,H as de,h as M,l as P,X as se,Y as Ie,I as Ce,A as Ne}from"../chunks/vendor-d06ad5ec.js";import{f as Se,l as me,c as ve}from"../chunks/mockup-2a0254f5.js";import{g as He,l as Me,t as ae,c as Ye}from"../chunks/store-95fac600.js";const De=async(n,e="utf-8")=>(await Ae({url:n,method:"GET",responseType:"arraybuffer"})).data,$e="https://cors-anywhere.herokuapp.com/https://www.duranno.com/qt/view/explain.asp",Oe={\uAC1C\uC5ED\uAC1C\uC815:"https://cors-anywhere.herokuapp.com/https://www.duranno.com/qt/view/bible.asp?d=k",\uC6B0\uB9AC\uB9D0\uC131\uACBD:"https://cors-anywhere.herokuapp.com/https://www.duranno.com/qt/view/bible.asp?d=w"},Ve=async({bibleType:n="\uAC1C\uC5ED\uAC1C\uC815",date:e=new Date}={})=>{const s=_e.load(await De(Oe[n]+`&qtDate=${V(new Date(e)).format("yyyy-MM-DD")}`,"euc-kr")),a=_e.load(await De($e,"euc-kr")),t=s("h1 em").text().trim(),l=t.slice(0,t.indexOf(" ")),[r,f]=t.substring(t.indexOf(" ")).split("~").map(d=>d.trim()),[o,h]=r.split(":").map(d=>+d),[i,k]=f.includes(":")?f.split(":").map(d=>+d):[o,+f];return{contentType:"\uC0DD\uBA85\uC758\uC0B6",title:s("h1 span").text().trim(),range:{text:`${l} ${o}:${h} - ${i}:${k}`,book:l,start:{capter:o,verse:h},end:{caper:i,verse:k}},date:V(new Date(e)).format("yyyy-MM-DD"),verses:s(".bible").children().map((d,C)=>{const m=s(C);if(C.tagName==="p")return{text:m.text().trim()};const T=+m.find("th").text().trim();return{capter:T>h?o:i,verse:T,text:m.find("td").text().trim()}}).toArray(),commentaries:[...a(".bible").children().filter((d,C)=>C.tagName==="p").map((d,C)=>s(C).html()).toArray().flatMap(d=>d.replace("&amp;","&").split("<br>")),""]}},Le=({contentType:n})=>{if(n==="\uC0DD\uBA85\uC758\uC0B6")return Re();if(n==="\uB9E4\uC77C\uC131\uACBD")return ne("\uAE30\uBCF8");if(n==="\uB9E4\uC77C\uC131\uACBD \uC21C")return ne("\uC21C");if(n==="\uB9E4\uC77C\uC131\uACBD \uC601\uC5B4")return ne("\uC601\uC5B4")},Re=(n="\uAC1C\uC5ED\uAC1C\uC815")=>Ve({bibleType:n}),ne=(n="\uAE30\uBCF8")=>Se({bibleType:n});function be(n,e,s){const a=n.slice();return a[9]=e[s],a}function ke(n,e,s){const a=n.slice();return a[12]=e[s].capter,a[13]=e[s].verse,a[9]=e[s].text,a}function Ee(n,e,s){const a=n.slice();return a[16]=e[s],a}function ge(n){let e,s=n[16]+"",a,t,l,r,f;function o(){return n[4](n[16])}return{c(){e=v("p"),a=y(s),t=z(),this.h()},l(h){e=D(h,"P",{class:!0});var i=b(e);a=A(i,s),t=I(i),i.forEach(_),this.h()},h(){g(e,"class",l=""+(pe(`btn ${n[16]===n[1]&&"selected"}`)+" svelte-1owqz13"))},m(h,i){q(h,e,i),p(e,a),p(e,t),r||(f=de(e,"click",o),r=!0)},p(h,i){n=h,i&2&&l!==(l=""+(pe(`btn ${n[16]===n[1]&&"selected"}`)+" svelte-1owqz13"))&&g(e,"class",l)},d(h){h&&_(e),r=!1,f()}}}function we(n){let e,s,a,t,l,r,f,o,h=V(n[0].date).format("YYYY.MM.DD")+"",i,k,d=He()+"",C,m,T,N,j=n[0].title+"",U,x,G,J=n[0].range.text+"",W,ee,Y,X,S,L,K,te,le,$,R=n[0].verses,w=[];for(let u=0;u<R.length;u+=1)w[u]=Be(ke(n,R,u));let F=n[0].commentaries,B=[];for(let u=0;u<F.length;u+=1)B[u]=ye(be(n,F,u));return{c(){e=v("section"),s=v("header"),a=v("h2"),t=v("a"),l=y("\uCD9C\uCC98"),f=z(),o=v("h2"),i=y(h),k=y(" ("),C=y(d),m=y(")"),T=z(),N=v("h1"),U=y(j),x=z(),G=v("h2"),W=y(J),ee=z(),Y=v("div");for(let u=0;u<w.length;u+=1)w[u].c();X=z(),S=v("section"),L=v("header"),K=v("h1"),te=y("\uBCF8\uBB38\uD574\uC124"),le=z(),$=v("div");for(let u=0;u<B.length;u+=1)B[u].c();this.h()},l(u){e=D(u,"SECTION",{class:!0});var E=b(e);s=D(E,"HEADER",{class:!0});var c=b(s);a=D(c,"H2",{});var H=b(a);t=D(H,"A",{target:!0,href:!0});var oe=b(t);l=A(oe,"\uCD9C\uCC98"),oe.forEach(_),H.forEach(_),f=I(c),o=D(c,"H2",{});var Q=b(o);i=A(Q,h),k=A(Q," ("),C=A(Q,d),m=A(Q,")"),Q.forEach(_),T=I(c),N=D(c,"H1",{});var re=b(N);U=A(re,j),re.forEach(_),x=I(c),G=D(c,"H2",{});var ce=b(G);W=A(ce,J),ce.forEach(_),c.forEach(_),ee=I(E),Y=D(E,"DIV",{class:!0});var ie=b(Y);for(let O=0;O<w.length;O+=1)w[O].l(ie);ie.forEach(_),E.forEach(_),X=I(u),S=D(u,"SECTION",{class:!0});var Z=b(S);L=D(Z,"HEADER",{class:!0});var ue=b(L);K=D(ue,"H1",{});var fe=b(K);te=A(fe,"\uBCF8\uBB38\uD574\uC124"),fe.forEach(_),ue.forEach(_),le=I(Z),$=D(Z,"DIV",{class:!0});var he=b($);for(let O=0;O<B.length;O+=1)B[O].l(he);he.forEach(_),Z.forEach(_),this.h()},h(){g(t,"target","_blank"),g(t,"href",r=me[n[1]]),g(s,"class","svelte-1owqz13"),g(Y,"class","bible svelte-1owqz13"),g(e,"class","svelte-1owqz13"),g(L,"class","svelte-1owqz13"),g($,"class","bible svelte-1owqz13"),g(S,"class","svelte-1owqz13")},m(u,E){q(u,e,E),p(e,s),p(s,a),p(a,t),p(t,l),p(s,f),p(s,o),p(o,i),p(o,k),p(o,C),p(o,m),p(s,T),p(s,N),p(N,U),p(s,x),p(s,G),p(G,W),p(e,ee),p(e,Y);for(let c=0;c<w.length;c+=1)w[c].m(Y,null);q(u,X,E),q(u,S,E),p(S,L),p(L,K),p(K,te),p(S,le),p(S,$);for(let c=0;c<B.length;c+=1)B[c].m($,null)},p(u,E){if(E&2&&r!==(r=me[u[1]])&&g(t,"href",r),E&1&&h!==(h=V(u[0].date).format("YYYY.MM.DD")+"")&&M(i,h),E&1&&j!==(j=u[0].title+"")&&M(U,j),E&1&&J!==(J=u[0].range.text+"")&&M(W,J),E&9){R=u[0].verses;let c;for(c=0;c<R.length;c+=1){const H=ke(u,R,c);w[c]?w[c].p(H,E):(w[c]=Be(H),w[c].c(),w[c].m(Y,null))}for(;c<w.length;c+=1)w[c].d(1);w.length=R.length}if(E&1){F=u[0].commentaries;let c;for(c=0;c<F.length;c+=1){const H=be(u,F,c);B[c]?B[c].p(H,E):(B[c]=ye(H),B[c].c(),B[c].m($,null))}for(;c<B.length;c+=1)B[c].d(1);B.length=F.length}},d(u){u&&_(e),se(w,u),u&&_(X),u&&_(S),se(B,u)}}}function Fe(n){let e,s,a=n[13]+"",t,l,r,f=n[9]+"",o,h,i,k;function d(){return n[5](n[12],n[13],n[9])}return{c(){e=v("div"),s=v("span"),t=y(a),l=z(),r=v("p"),o=y(f),h=z(),this.h()},l(C){e=D(C,"DIV",{class:!0});var m=b(e);s=D(m,"SPAN",{class:!0});var T=b(s);t=A(T,a),T.forEach(_),l=I(m),r=D(m,"P",{});var N=b(r);o=A(N,f),N.forEach(_),h=I(m),m.forEach(_),this.h()},h(){g(s,"class","svelte-1owqz13"),g(e,"class","svelte-1owqz13")},m(C,m){q(C,e,m),p(e,s),p(s,t),p(e,l),p(e,r),p(r,o),p(e,h),i||(k=de(e,"click",d),i=!0)},p(C,m){n=C,m&1&&a!==(a=n[13]+"")&&M(t,a),m&1&&f!==(f=n[9]+"")&&M(o,f)},d(C){C&&_(e),i=!1,k()}}}function Pe(n){let e,s=n[9]+"",a;return{c(){e=v("h5"),a=y(s),this.h()},l(t){e=D(t,"H5",{class:!0});var l=b(e);a=A(l,s),l.forEach(_),this.h()},h(){g(e,"class","svelte-1owqz13")},m(t,l){q(t,e,l),p(e,a)},p(t,l){l&1&&s!==(s=t[9]+"")&&M(a,s)},d(t){t&&_(e)}}}function Be(n){let e;function s(l,r){return l[13]?Fe:Pe}let a=s(n),t=a(n);return{c(){t.c(),e=P()},l(l){t.l(l),e=P()},m(l,r){t.m(l,r),q(l,e,r)},p(l,r){a===(a=s(l))&&t?t.p(l,r):(t.d(1),t=a(l),t&&(t.c(),t.m(e.parentNode,e)))},d(l){t.d(l),l&&_(e)}}}function je(n){let e,s=n[9]+"",a;return{c(){e=v("h5"),a=y(s),this.h()},l(t){e=D(t,"H5",{class:!0});var l=b(e);a=A(l,s),l.forEach(_),this.h()},h(){g(e,"class","svelte-1owqz13")},m(t,l){q(t,e,l),p(e,a)},p(t,l){l&1&&s!==(s=t[9]+"")&&M(a,s)},d(t){t&&_(e)}}}function Ge(n){let e,s=n[9]+"",a;return{c(){e=v("pre"),a=y(s),this.h()},l(t){e=D(t,"PRE",{class:!0});var l=b(e);a=A(l,s),l.forEach(_),this.h()},h(){g(e,"class","svelte-1owqz13")},m(t,l){q(t,e,l),p(e,a)},p(t,l){l&1&&s!==(s=t[9]+"")&&M(a,s)},d(t){t&&_(e)}}}function ye(n){let e;function s(l,r){if(l[9].length>30)return Ge;if(l[9].length>2)return je}let a=s(n),t=a&&a(n);return{c(){t&&t.c(),e=P()},l(l){t&&t.l(l),e=P()},m(l,r){t&&t.m(l,r),q(l,e,r)},p(l,r){a===(a=s(l))&&t?t.p(l,r):(t&&t.d(1),t=a&&a(l),t&&(t.c(),t.m(e.parentNode,e)))},d(l){t&&t.d(l),l&&_(e)}}}function Je(n){let e,s,a,t,l=ve,r=[];for(let o=0;o<l.length;o+=1)r[o]=ge(Ee(n,l,o));let f=n[0]&&we(n);return{c(){e=z(),s=v("section");for(let o=0;o<r.length;o+=1)r[o].c();a=z(),f&&f.c(),t=P(),this.h()},l(o){Ie('[data-svelte="svelte-1ihar54"]',document.head).forEach(_),e=I(o),s=D(o,"SECTION",{class:!0});var i=b(s);for(let k=0;k<r.length;k+=1)r[k].l(i);i.forEach(_),a=I(o),f&&f.l(o),t=P(),this.h()},h(){document.title="\uC131\uACBD\uBB35\uC0C1",g(s,"class","nav svelte-1owqz13")},m(o,h){q(o,e,h),q(o,s,h);for(let i=0;i<r.length;i+=1)r[i].m(s,null);q(o,a,h),f&&f.m(o,h),q(o,t,h)},p(o,[h]){if(h&6){l=ve;let i;for(i=0;i<l.length;i+=1){const k=Ee(o,l,i);r[i]?r[i].p(k,h):(r[i]=ge(k),r[i].c(),r[i].m(s,null))}for(;i<r.length;i+=1)r[i].d(1);r.length=l.length}o[0]?f?f.p(o,h):(f=we(o),f.c(),f.m(t.parentNode,t)):f&&(f.d(1),f=null)},i:Ce,o:Ce,d(o){o&&_(e),o&&_(s),se(r,o),o&&_(a),f&&f.d(o),o&&_(t)}}}function Ke(n,e,s){let a,t,l;Ne(async()=>{t=JSON.parse(sessionStorage.getItem("qtcontents"))||[],s(1,l=localStorage.getItem("contentType")||"\uC0DD\uBA85\uC758\uC0B6"),f()||await o()});const r=d=>{localStorage.setItem("contentType",d),s(1,l=d),f()||o()},f=()=>{const d=t.find(C=>V.duration(V(C.date).diff(V())).asDays()&&C.contentType===l);return d?(s(0,a=d),!0):!1},o=Me.handle(async()=>{const{data:d,message:C}=await Le({contentType:l});if(C)return ae.onToast(C);s(0,a=d),t=[...t,d],sessionStorage.setItem("qtcontents",JSON.stringify(t))}),h=async({capter:d,verse:C,text:m})=>{try{const T=Ye.transferTemplete({contentType:l,book:a.range.book,capter:d,verse:C,text:m});await navigator.clipboard.writeText(T),ae.onToast("\uD074\uB9BD\uBCF4\uB4DC\uC5D0 \uBCF5\uC0AC \uC644\uB8CC",1e3)}catch(T){ae.onToast("[\uC624\uB958] \uBCF5\uC0AC \uC2E4\uD328"),console.log(T)}};return[a,l,r,h,d=>r(d),(d,C,m)=>h({capter:d,verse:C,text:m})]}class Xe extends qe{constructor(e){super();Te(this,e,Ke,Je,ze,{})}}export{Xe as default};
